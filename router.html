<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Routingâ€¦</title>
  <script src="js/schedule.js"></script>
</head>
<body>

<script>
  if (localStorage.getItem("auth") !== "true") {
    window.location.href = "index.html";
  }

  const now = Date.now();
  let currentDay = null;

  for (let day of SCHEDULE) {
    const unlock = new Date(day.date).getTime();

    if (isNaN(unlock)) {
      console.error("Invalid date:", day);
      continue;
    }

    if (now >= unlock) {
      currentDay = day;  // Track last unlocked day
    } else {
      break;  // First future day stops loop
    }
  }

  if (currentDay) {
    window.location.href = currentDay.page;  // Rose Day: "days/rose.html"
  } else {
    window.location.href = "countdown.html";
  }
</script>

</body>
</html>
